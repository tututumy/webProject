var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(b,a,c){b instanceof String&&(b=String(b));for(var d=b.length,e=0;e<d;e++){var g=b[e];if(a.call(c,g,e,b))return{i:e,v:g}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,a,c){b!=Array.prototype&&b!=Object.prototype&&(b[a]=c.value)};$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(b,a,c,d){if(a){c=$jscomp.global;b=b.split(".");for(d=0;d<b.length-1;d++){var e=b[d];e in c||(c[e]={});c=c[e]}b=b[b.length-1];d=c[b];a=a(d);a!=d&&null!=a&&$jscomp.defineProperty(c,b,{configurable:!0,writable:!0,value:a})}};$jscomp.polyfill("Array.prototype.find",function(b){return b?b:function(b,c){return $jscomp.findInternal(this,b,c).v}},"es6","es3");
$jscomp.polyfill("Array.prototype.fill",function(b){return b?b:function(b,c,d){var a=this.length||0;0>c&&(c=Math.max(0,a+c));if(null==d||d>a)d=a;d=Number(d);0>d&&(d=Math.max(0,a+d));for(c=Number(c||0);c<d;c++)this[c]=b;return this}},"es6","es3");function tab2plot(){$("#tab_attr").addClass("disabled");$("#tab_plot").click()}
$(function(){$(window).resize(refHeight);refHeight();$(".mp_icon_close").click(function(){$(this).parent().parent(".mp_box").hide()});$(".mp_tab_tit li").click(function(){if($(this).hasClass("cur")||$(this).hasClass("disabled"))return!1;var b=$(this),a=b.index();b.addClass("cur").siblings("li").removeClass("cur");b.parent().siblings(".mp_tab_con").children().eq(a).addClass("cur").siblings().removeClass("cur");b=$(this).attr("id");"tab_plot"!=b&&(last_attr_tab=b)});$(".open").click(changeOpenShowHide)});
var last_attr_tab="tab_attr",g_addsymbolFrame={};function tab2attr(){$("#tab_attr").removeClass("disabled");$("#tab_plot").hasClass("cur")&&$("#"+last_attr_tab).click()}function changeOpenShowHide(){var b=$(this).siblings(),a=$(this).children(".tree_icon");b.toggle();b.is(":hidden")?a.html("+"):a.html("-")}
function refHeight(){$(".mp_tab_card").height($(".mp_box").height()-$(".mp_head").height()-1);$(".mp_tree").height($(".mp_tab_card").height()-32);$(".mp_mark").height($(".mp_tab_card").height()-80)}
!function(b){var a={select:"mp_select",select_text:"mp_select_text",select_ul:"mp_select_ul"};b.fn.extend({select:function(c){var d=b.extend({},a,c);return this.each(function(){var a=b(this);void 0!==a.data("value")&&""!==a.data("value")&&a.val(a.data("value"));var c=[];c.push('<div class="'+a.attr("class")+'">');c.push('<div class="'+d.select_text+'">'+a.find(":selected").text()+"</div>");c.push('<ul class="'+d.select_ul+'">');a.children("option").each(function(){var d=b(this);a.data("value");d.val();
c.push('<li data-value="'+d.val()+'">'+d.text()+"</li>")});c.push("</ul>");c.push("</div>");var k=b(c.join("")),h=k.find("."+d.select_text),f=k.find("."+d.select_ul);a.after(k);a.hide();k.click(function(a){b(this).toggleClass("mp_selected");b(this).find("."+d.select_ul).slideToggle().end().siblings("div."+d.select).find("."+d.select_ul).slideUp();a.stopPropagation()});b("body").click(function(){f.slideUp()});f.on("click","li",function(){var c=b(this),d=c.addClass("selecton").siblings("li").removeClass("selecton").end().data("value").toString();
d!==a.attr("data-value")&&(h.text(c.text()),a.attr("data-value",d),a.change())})})},checkbox:function(){return this.each(function(){var a=b(this),d=a.siblings("input");1==d.prop("disabled")?a.addClass("pnui-check-disbaled"):1==d.prop("checked")?a.addClass("pnui-checked"):a.removeClass("pnui-checked");a.on("click",function(){if(1==d.prop("disabled"))return!1;a.hasClass("pnui-checked")?(d.removeAttr("checked"),a.removeClass("pnui-checked")):(d.attr("checked","checked"),a.addClass("pnui-checked"))});
b(".checkall").click(function(){var a=b(this),c=a.parents(".checkallbox").find(".pnui-chkbox");a.toggleClass("pnui-checked");c.each(function(){b(this).toggleClass("pnui-checked")});a.hasClass("pnui-checked")?(c.siblings("input").attr("checked","checked"),c.addClass("pnui-checked")):(c.siblings("input").removeAttr("checked"),c.removeClass("pnui-checked"))})})},radio:function(){return this.each(function(){var a=b(this);1==a.children("input").prop("disabled")?a.children(".pnui-rdobox").removeClass().addClass("pnui-rdobox pnui-radio-disbaled"):
1==a.children("input").prop("checked")?(a.siblings().children("input").removeAttr("checked"),a.siblings().children(".pnui-rdobox").removeClass("pnui-checked"),a.children(".pnui-rdobox").addClass("pnui-checked")):(a.siblings().children("input").prop("checked","checked"),a.siblings().children(".pnui-rdobox").addClass("pnui-checked"),a.children(".pnui-rdobox").removeClass("pnui-checked"));a.on("click",function(){var a=b(this);if(1==a.children("input").prop("disabled"))return!1;1==a.children("input").prop("checked")?
(a.siblings().children("input").prop("checked","checked"),a.siblings().children(".pnui-rdobox").addClass("pnui-checked"),a.children("input").removeAttr("checked"),a.children(".pnui-rdobox").removeClass("pnui-checked")):(a.siblings().children("input").removeAttr("checked"),a.siblings().children(".pnui-rdobox").removeClass("pnui-checked"),a.children("input").prop("checked","checked"),a.children(".pnui-rdobox").addClass("pnui-checked"))})})},progress:function(a){return this.each(function(){var c=b(this),
e=[];e.push('<div class="puiprogress">');e.push('<div class="puiprogress_bg">');e.push('<div class="puiprogress_bar"></div>');e.push("</div>");e.push('<div id="progress_bar" class="puiprogress_btn"></div>');e.push('<div id="progress_text" class="puiprogress_text">'+c.val()+"%</div>");e.push("</div>");e=b(e.join(""));var g=e.find(".puiprogress_bg"),k=e.find(".puiprogress_btn"),h=e.find(".puiprogress_bar"),f=e.find(".puiprogress_text");c.after(e);c.hide();var l=!1,p=0,m=0,r=0;e.css("width",a);var t=
Number(c.val());m=a*t/100;k.css("left",m);h.width(m);f.html(parseInt(t)+"%");k.mousedown(function(b){p=b.pageX-m;l=!0});b(document).mouseup(function(){l=!1});e.mousemove(function(b){l&&(0>=(m=b.pageX-p)?m=0:a<m&&(m=a),k.css("left",m),h.width(m),b=parseInt(m/a*100),f.html(b+"%"),c.val(b),c.change())});g.click(function(b){l||(r=g.offset().left,0>=(m=b.pageX-r)?m=0:a<m&&(m=a),k.css("left",m),h.animate({width:m},a),b=parseInt(m/a*100),f.html(b+"%"),c.val(b),c.change())})})}})}(jQuery);
var Z={label:{edittype:"label",name:"\u6587\u5b57",style:{text:"\u6587\u5b57",color:"#ffffff",opacity:1,font_family:"\u6977\u4f53",font_size:30,border:!0,border_color:"#000000",border_width:3,background:!1,background_color:"#000000",background_opacity:.5,font_weight:"normal",font_style:"normal",scaleByDistance:!1,scaleByDistance_far:1E6,scaleByDistance_farValue:.1,scaleByDistance_near:1E3,scaleByDistance_nearValue:1,distanceDisplayCondition:!1,distanceDisplayCondition_far:1E4,distanceDisplayCondition_near:0},
attr:{id:"",name:"",remark:""}},point:{edittype:"point",name:"\u70b9\u519b\u6807",style:{symbolSize:.2,pixelSize:.2,textx:.2,texty:.2,textcolor:"#ff0000",font_size:30,color:"#3388ff",opacity:1,outline:!0,anchor:"CENTER",name:"",outlineColor:"#ffffff",outlineOpacity:1,outlineWidth:2,scaleByDistance:!1,scaleByDistance_far:1E6,scaleByDistance_farValue:.1,scaleByDistance_near:1E3,scaleByDistance_nearValue:1,distanceDisplayCondition:!1,distanceDisplayCondition_far:1E4,distanceDisplayCondition_near:0},
attr:{id:"",name:"",remark:""}},imagepoint:{edittype:"imagepoint",name:"\u56fe\u6807\u70b9\u6807\u8bb0",style:{image:"",opacity:1,scale:1,rotation:0,scaleByDistance:!1,scaleByDistance_far:1E6,scaleByDistance_farValue:.1,scaleByDistance_near:1E3,scaleByDistance_nearValue:1,distanceDisplayCondition:!1,distanceDisplayCondition_far:1E4,distanceDisplayCondition_near:0},attr:{id:"",name:"",remark:""}},model:{edittype:"model",name:"\u6a21\u578b",style:{modelUrl:"",scale:1,heading:0,pitch:0,roll:0,fill:!1,
color:"#3388ff",opacity:1,silhouette:!1,silhouetteColor:"#ffffff",silhouetteSize:2,silhouetteAlpha:.8},attr:{id:"",name:"",remark:""}},polyline:{edittype:"polyline",name:"\u7ebf",position:{minCount:2},style:{lineType:"solid",color:"#3388ff",width:4,clampToGround:!1,outline:!1,outlineColor:"#ffffff",outlineWidth:2,opacity:1},attr:{id:"",name:"",remark:""}},polylineVolume:{edittype:"polylineVolume",name:"\u7ba1\u9053\u7ebf",position:{height:!0,minCount:2},style:{color:"#00FF00",radius:10,shape:"pipeline",
outline:!1,outlineColor:"#ffffff",opacity:1},attr:{id:"",name:"",remark:""}},polygon:{edittype:"polygon",name:"\u9762",position:{height:!0,minCount:3},style:{color:"#3388ff",opacity:.6,outline:!0,outlineColor:"#ffffff",outlineOpacity:1,clampToGround:!1},attr:{id:"",name:"",remark:""}},polygon_clampToGround:{edittype:"polygon_clampToGround",name:"\u8d34\u5730\u9762",position:{height:!1,minCount:3},style:{color:"#ffff00",opacity:.6,outline:!0,outlineColor:"#ffffff",outlineOpacity:1,clampToGround:!0},
attr:{id:"",name:"",remark:""}},extrudedPolygon:{edittype:"extrudedPolygon",name:"\u62c9\u4f38\u9762",position:{height:!0,minCount:3},style:{color:"#00FF00",opacity:.6,outline:!0,outlineColor:"#ffffff",outlineOpacity:1,extrudedHeight:100,perPositionHeight:!0},attr:{id:"",name:"",remark:""}},rectangle:{edittype:"rectangle",name:"\u77e9\u5f62",position:{height:!1,minCount:2,maxCount:2},style:{height:0,color:"#3388ff",rotation:0,opacity:.6,clampToGround:!1},attr:{id:"",name:"",remark:""}},rectangle_clampToGround:{edittype:"rectangle_clampToGround",
name:"\u8d34\u5730\u77e9\u5f62",position:{height:!1,minCount:2,maxCount:2},style:{color:"#ffff00",rotation:0,opacity:.6,clampToGround:!0},attr:{id:"",name:"",remark:""}},rectangleImg:{edittype:"rectangleImg",name:"\u8d34\u5730\u56fe\u7247",position:{height:!1,minCount:2,maxCount:2},style:{image:"",rotation:0,opacity:1,clampToGround:!0},attr:{id:"",name:"",remark:""}},extrudedRectangle:{edittype:"extrudedRectangle",name:"\u62c9\u4f38\u77e9\u5f62",position:{height:!1,minCount:2,maxCount:2},style:{color:"#00FF00",
outline:!0,outlineColor:"#ffffff",rotation:0,opacity:.6,extrudedHeight:40,height:0},attr:{id:"",name:"",remark:""}},ellipse:{edittype:"ellipse",name:"\u692d\u5706",position:{height:!1},style:{semiMinorAxis:500,semiMajorAxis:500,height:0,opacity:.6,fill:!0,color:"#3388ff",outline:!0,outlineColor:"#ffffff",rotation:0,clampToGround:!1},attr:{id:"",name:"",remark:""}},ellipse_clampToGround:{edittype:"ellipse_clampToGround",name:"\u692d\u5706",position:{height:!1},style:{semiMinorAxis:500,semiMajorAxis:500,
opacity:.6,fill:!0,color:"#ffff00",outline:!0,outlineColor:"#ffffff",rotation:0,clampToGround:!0},attr:{id:"",name:"",remark:""}},extrudedEllipse:{edittype:"extrudedEllipse",name:"\u5706\u67f1\u4f53",position:{height:!1},style:{semiMinorAxis:100,semiMajorAxis:100,opacity:.6,fill:!0,color:"#00FF00",outline:!0,outlineColor:"#ffffff",extrudedHeight:100,height:0,rotation:0},attr:{id:"",name:"",remark:""}},ellipsoid:{edittype:"ellipsoid",name:"\u7403\u4f53",style:{extentRadii:100,widthRadii:100,heightRadii:100,
color:"#00FF00",outline:!0,outlineColor:"#ffffff",fill:!0,opacity:.6},attr:{id:"",name:"",remark:""}},wall:{edittype:"wall",name:"\u5899\u4f53",position:{height:!0,minCount:2},style:{color:"#00FF00",outline:!0,outlineColor:"#ffffff",opacity:.6,extrudedHeight:40},attr:{id:"",name:"",remark:""}}},thisWidget=parent.g_drawHelper,g_curpageidx=0,g_strJson="";
function initWidgetView(b){(thisWidget=b).config&&thisWidget.config.style&&$("body").addClass(thisWidget.config.style);$("#btn_plot_delall").click(function(){thisWidget.deleteAll()});$("#btnDelete").click(function(b){thisWidget.deleteCurrentEntity();tab2plot()});$("#btnCenter").click(function(b){thisWidget.centerCurrentEntity()});var a=!0;$("#btn_plot_isedit").click(function(){(a=!a)?($(this).removeClass("active"),$(this).children().removeClass("fa-lock").addClass("fa-unlock")):($(this).addClass("active"),
$(this).children().removeClass("fa-unlock").addClass("fa-lock"));thisWidget.hasEdit(a)});plotFile.initEvent();plotEdit.initEvent();plotEdit.loadConfig()}
var plotFile={initEvent:function(){var b=this;$("#btn_plot_openfile").click(function(){$("#input_plot_file").click()});$("#btn_plot_openfile2").click(function(){$("#input_plot_file").click()});$("#btn_plot_delall").click(function(){getParentHelper().removeAll()});$("#btn_plot_delone").click(function(){getParentHelper().deleteCurJB()});$("#btn_plot_editone").click(function(){getParentHelper().editCurSymbol(!0)});$("#btn_plot_cancelone").click(function(){getParentHelper().editCurSymbol(!1)});$("#btn_plot_editall").click(function(){getParentHelper().editSymbols(!0)});
$("#btn_plot_cancelall").click(function(){getParentHelper().editSymbols(!1)});$("#btn_plot_savefile").click(function(){var b=getParentHelper().saveSymbols();haoutil.file.downloadFile("\u6807\u7ed8.json",JSON.stringify(b))});$("#btn_plot_addnewjb").click(function(){window.open("jun-add.html","_blank")});$("#btn_plot_savenewjb").click(function(){alert("save newjb")});$("#input_plot_file").change(function(a){a=this.files[0];var c=a.name;"json"!=c.substring(c.lastIndexOf(".")+1,c.length).toLowerCase()?
alert(g_typeNotLegal):(void b.clearPlotFile(),window.FileReader&&(c=new FileReader,c.readAsText(a,"UTF-8"),c.onloadend=function(a){a=this.result;getParentHelper().readSymbol(a);b.clearPlotFile()}))})},clearPlotFile:function(){window.addEventListener?document.getElementById("input_plot_file").value="":document.getElementById("input_plot_file").outerHTML+=""}},plotlist={bindSelList:function(){for(var b=this,a=$("#sel_plot_list"),c,d="",e=0;e<g_symidnames.length;e++)d+='<option value="'+e+'">'+g_symidnames[e]+
"("+g_symidpages[e].length+")</option>";null==c&&(c=0);b.showPlotList2(c);a.attr("data-value",c);null!=c&&(a.attr("data-value",c),a.html(d),a.select(),a.change(function(){var a=$(this).attr("data-value");b.showPlotList2(a)}))},_listData:null,showPlotList2:function(b){g_curpageidx=this._listData=b;displayGlyphArray(g_symidpages[b])},_lastLi:null,startPlot:function(b,a){a=$(a);a.addClass("markon");this._lastLi&&this._lastLi.removeClass("markon");this._lastLi=a;b=this._listData[b];a=haoutil.system.clone(plotEdit.defval[b.edittype||
b.type]||{});if(b.style)for(var c in b.style)a.style[c]=b.style[c];if(b.attr)for(c in b.attr)a.attr[c]=b.attr[c];a.type=b.type;a.name=a.name||b.name;thisWidget.startDraw(a)},plotEnd:function(){this._lastLi&&this._lastLi.removeClass("markon")}},plotEdit={hasEditSylte:!0,config:{},defval:{},initEvent:function(){this.hasEditSylte||$("#attr_style_view").hide();$("#plot_latlngs_allheight").bind("input propertychange",function(){$("#plot_latlngs_addheight").val("");var b=Number($(this).val());isNaN(b)&&
(b=1);var a=[];$(".plot_latlngs").each(function(){"height"==$(this).attr("data-type")?($(this).val(b),a.push(b)):a.push(Number($(this).val()))});thisWidget.updateGeo2map(a,!0)});$("#plot_latlngs_addheight").bind("input propertychange",function(){$("#plot_latlngs_allheight").val("");var b=Number($(this).val());isNaN(b)&&(b=1);var a=[];$(".plot_latlngs").each(function(){if("height"==$(this).attr("data-type")){var c=Number($(this).attr("oldvalue"));$(this).val(c+b);a.push(c+b)}else a.push(Number($(this).val()))});
thisWidget.updateGeo2map(a,!0)})},loadConfig:function(){var b=g_strJson,a;for(a in this.config=b){for(var c={},d=0;d<b[a].style.length;d++)c[(g=b[a].style[d]).name]=g.defval;var e={};for(d=0;d<b[a].attr.length;d++){var g;e[(g=b[a].attr[d]).name]=g.defval}this.defval[a]={edittype:a,name:b[a].name,position:b[a].position,style:c,attr:e}}plotlist.bindSelList()},_last_attr:null,startEditing:function(b,a){this._last_attr=b;var c=this.config[b.edittype]||{};a&&this.updateLatlngsHtml(a,c.position);a=[];if(this.hasEditSylte){for(var d=
"plot_attr_style_",e='<tr><td class="nametd">'+g_viewType+"\uff1a</td><td>"+(c.name||b.name)+"</td></tr>",g=0;g<c.style.length;g++)if("hidden"!=(f=c.style[g]).type){var k=f.name,h=b.style[k];(l=this.getAttrInput(d,k,h,f)).fun&&(a.push({parname:d,name:k,value:h,edit:f,fun:l.fun}),e+='<tr  id="'+d+"tr_"+k+'" > <td class="nametd">'+f.label+"</td>  <td>"+l.html+"</td>  </tr>")}$("#talbe_style").html(e)}d="plot_attr_attr_";e="";for(g=0;g<c.attr.length;g++){var f;if("hidden"!=(f=c.attr[g]).type){var l;
k=f.name;h=b.attr[k];(l=this.getAttrInput(d,k,h,f)).fun&&a.push({parname:d,name:k,value:h,edit:f,fun:l.fun});e+='<tr  id="'+d+"tr_"+k+'" > <td class="nametd">'+f.label+"</td>  <td>"+l.html+"</td>  </tr>"}}$("#talbe_attr").html(e);for(g=0;g<a.length;g++)b=a[g],b.fun(b.parname,b.name,b.value,b.edit);tab2attr()},lastCfg:null,updateLatlngsHtml:function(b,a){this.lastCfg=a=a||this.lastCfg||{};$("#plot_latlngs_addheight").val("");$("#plot_latlngs_allheight").val("");$("#view_updateheight").hide();a.hasOwnProperty("height")||
(a.height=!0);var c="";if(b&&0!=b.length)if(1==b.length){var d=(h=b[0])[0],e=h[1];h=3==h.length?h[2]:0;c+=' <div class="mp_attr" style=" margin-top: 10px;"><table> <tr> <td class="nametd">\u7ecf\u5ea6\uff1a</td> <td><input type="number" class="mp_input plot_latlngs" data-type="jd" value="'+d+'"></td></tr><tr>  <td class="nametd">\u7eac\u5ea6\uff1a</td> <td><input type="number" class="mp_input plot_latlngs" data-type="wd" value="'+e+'"></td></tr>';a.height&&(c+='<tr><td class="nametd">\u9ad8\u7a0b\uff1a</td> <td><input type="number" class="mp_input plot_latlngs" data-type="height" value="'+
h+'" oldvalue="'+h+'"></td></tr>');c+=" </table> </div>"}else{a.height&&$("#view_updateheight").show();var g="";b.length>(a.minCount||3)&&(g='<i class="fa fa-trash-o latlng-del" title="\u5220\u9664\u70b9" ></i>');for(var k=0;k<b.length;k++){d=(h=b[k])[0];e=h[1];h=3==h.length?h[2]:0;var h,f="";(null==a.maxCount||b.length<a.maxCount)&&(f='<i class="fa  fa-plus-square-o latlng-install" title="\u63d2\u5165\u70b9" data-index="'+k+'" ></i>&nbsp;&nbsp;');c+='<div><div class="open"><i class="tree_icon">-</i>\u7b2c'+
(k+1)+'\u70b9 <label style="width:100px;">&nbsp;</label>    '+f+g+' </div><div class="mp_attr"><table><tr> <td class="nametd">\u7ecf\u5ea6\uff1a</td> <td><input  type="number" class="mp_input plot_latlngs" data-type="jd" data-index="'+k+'" value="'+d+'"></td>  </tr> <tr>  <td class="nametd">\u7eac\u5ea6\uff1a</td> <td><input  type="number" class="mp_input plot_latlngs" data-type="wd" data-index="'+k+'" value="'+e+'"></td> </tr> ';a.height&&(c+='<tr>  <td class="nametd">\u9ad8\u7a0b\uff1a</td> <td><input  type="number" class="mp_input plot_latlngs" data-type="height" data-index="'+
k+'" value="'+h+'" oldvalue="'+h+'"></td> </tr> ');c+=" </table> </div> </div>"}}$("#view_latlngs").html(c);$("#view_latlngs .open").click(changeOpenShowHide);var l=this;$("#view_latlngs .latlng-del").click(function(){$(this).parent().parent().remove();var b=[],a=!1;$(".plot_latlngs").each(function(){b.push(Number($(this).val()));"height"===$(this).attr("data-type")&&(a=!0)});thisWidget.updateGeo2map(b,a);var c=[];if(a)for(var f=0;f<b.length;f+=3)c.push([b[f],b[f+1],b[f+2]]);else for(f=0;f<b.length;f+=
2)c.push([b[f],b[f+1]]);l.updateLatlngsHtml(c)});$("#view_latlngs .latlng-install").click(function(){var b=Number($(this).attr("data-index")),a=[],c=!1;$(".plot_latlngs").each(function(){a.push(Number($(this).val()));"height"===$(this).attr("data-type")&&(c=!0)});var f=[];if(c)for(var d=0;d<a.length;d+=3)f.push([a[d],a[d+1],a[d+2]]);else for(d=0;d<a.length;d+=2)f.push([a[d],a[d+1]]);var e=f[b],h=b==f.length-1?f[0]:f[b+1];d=Number(((e[0]+h[0])/2).toFixed(6));var g=Number(((e[1]+h[1])/2).toFixed(6));
c?(e=Number(((e[2]+h[2])/2).toFixed(1)),f.splice(b+1,0,[d,g,e]),a.splice(3*(b+1),0,d,g,e)):(f.splice(b+1,0,[d,g]),a.splice(3*(b+1),0,d,g));l.updateLatlngsHtml(f);thisWidget.updateGeo2map(a,c)});$(".plot_latlngs").bind("input propertychange",function(){var b=[],a=!1;$(".plot_latlngs").each(function(){b.push(Number($(this).val()));"height"===$(this).attr("data-type")&&(a=!0)});thisWidget.updateGeo2map(b,a)})},stopEditing:function(){tab2plot();$("#talbe_style").html("");$("#talbe_attr").html("");this._last_attr=
null},getAttrInput:function(b,a,c,d){null!=c&&null!=c||(c="");var e=this,g="",k=null;switch(d.type){default:case "label":g=c;break;case "text":g='<input id="'+b+a+'" type="text" value="'+c+'"   class="mp_input" />';k=function(b,a,c,d){$("#"+b+a).on("input propertychange",function(c){c=$(this).val();e.updateAttr(b,a,c)})};break;case "textarea":g='<textarea  id="'+b+a+'"     class="mp_input" style="height:50px;resize: none;" >'+(c=c.replace(/<br \/>/gm,"\n"))+"</textarea>";k=function(b,a,c,d){$("#"+
b+a).on("input propertychange",function(c){c=$(this).val();0==c.length&&(c="  ");c=c.replace(/\n/g,"<br />");e.updateAttr(b,a,c)})};break;case "number":g='<input id="'+b+a+'" type="number" value="'+c+'"    class="mp_input"/>';k=function(b,a,c,d){$("#"+b+a).on("input propertychange",function(c){c=Number($(this).val());e.updateAttr(b,a,c)})};break;case "combobox":g='<select id="'+b+a+'" class="mp_select"    data-value="'+c+'" >';for(c=0;c<d.data.length;c++)b=d.data[c],g+='<option value="'+b.value+'">'+
b.text+"</option>";g+="</select>";k=function(b,a,c,d){$("#"+b+a).select();$("#"+b+a).change(function(){var c=$(this).attr("data-value");e.updateAttr(b,a,c)})};break;case "radio":d=b+a;g='  <div class="radio radio-info radio-inline">                                <input type="radio" id="'+d+'_1" value="1"  name="'+d+'"  '+(c?'checked="checked"':"")+'>                                <label for="'+d+'_1"> '+g_viewYESNO[0]+'</label>                            </div>                            <div class="radio radio-info radio-inline">                                <input type="radio" id="'+
d+'_2" value="2" name="'+d+'" '+(c?"":'checked="checked"')+' ">                                <label for="'+d+'_2"> '+g_viewYESNO[1]+" </label>                            </div>";k=function(b,a,c,d){$('input:radio[name="'+b+a+'"]').change(function(){var c="1"==$(this).val();e.updateAttr(b,a,c);e.changeViewByAttr(b,d.impact,c)});e.changeViewByAttr(b,d.impact,c)};break;case "color3":g='<input id="'+b+a+'"  class="mp_input" style="width: 100%;"  value="'+c+'" />';k=function(b,a,c,d){$("#"+b+a).minicolors({position:"bottom right",
control:"saturation",change:function(c,d){e.updateAttr(b,a,c)}})};break;case "color":g='<input id="'+b+a+'"  type="color" value="'+c+'" />';k=function(b,a,c,d){$("#"+b+a).colpick({polyfill:!0});$("#"+b+a).on("input propertychange",function(c){c=$(this).val();e.updateAttr(b,a,c)})};break;case "slider":g='<input id="'+b+a+'"  type="text" value="'+100*c+'" />';k=function(b,a,c,d){c=.7*$(".mp_tab_card").width()-30;$("#"+b+a).progress(c);$("#"+b+a).change(function(){var c=Number($(this).val())/100;e.updateAttr(b,
a,c)})};break;case "slider2":g='<div ><div  style="float:right;"><li id="btn_plot_increase"><i class="\tfa fa-angle-up" title="'+g_viewChange[0]+'"></i></li><li id="btn_plot_decrease"><i class="fa fa-angle-down" title="'+g_viewChange[1]+'"></i></li> </div><div><input id="'+b+a+'"  type="text" value="'+100*c+'" /></div>';k=function(b,a,c,d){c=.7*$(".mp_tab_card").width()-30;$("#"+b+a).progress(c);$("#"+b+a).change(function(){var c=Number($(this).val())/100;e.updateAttr(b,a,c)});$("#btn_plot_increase").on("click",
function(c){c=Number($("#"+b+a).val())/100;c=Math.round(1E3*(c+.01))/1E3;$("#"+b+a).val(100*c);$("#progress_text").html(parseInt(100*c)+"%");e.updateAttr(b,a,c)});$("#btn_plot_decrease").on("click",function(c){c=Number($("#"+b+a).val())/100;c=Math.round(1E3*(c-.01))/1E3;$("#"+b+a).val(100*c);$("#progress_text").html(parseInt(100*c)+"%");e.updateAttr(b,a,c)})};break;case "window":g='<input id="'+b+a+'" type="text" value="'+c+'" readonly   class="mp_input" />',k=function(b,a,c,d){$("#"+b+a).on("click",
function(d){thisWidget.showEditAttrWindow({data:e._last_attr,parname:b,attrName:a,attrVal:c})});$("#"+b+a).on("input propertychange",function(c){c=$(this).val();e.updateAttr(b,a,c)})}}return{html:g,fun:k}},changeViewByAttr:function(b,a,c){if(a&&0<a.length)for(var d=0;d<a.length;d++){var e=a[d];c?$("#"+b+"tr_"+e).show():$("#"+b+"tr_"+e).hide()}},updateAttr:function(b,a,c){switch(b){case "plot_attr_style_":this._last_attr.style[a]=c;break;case "plot_attr_attr_":this._last_attr.attr[a]=c}thisWidget.updateAttribute(this._last_attr)}};
plotFile.initEvent();plotEdit.initEvent();
function showEditProperty(b,a,c){var d=getGidFromKeyid(a),e=getParentHelper();0==b?(a=Z.point,a.style.text=c.text,a.style.annoText=c.annoText,a.style.symbolSize=(c.symbolWidth-40)/400,a.style.textx=c.textx,a.style.texty=c.texty,a.style.font_size=c.font_size,a.style.textcolor=c.textcolor,a.style.outline=!0,a.style.outlineColor=c.stroke,a.style.outlineWidth=c.strokeWidth,a.style.color=c.fill,a.style.anchor=c.anchor,a.style.name=c.name,a.style.label=c.label,a.style.labelDirection=c.labelDirection,a.style.labelOffsetX=
c.labelOffsetX,a.style.labelOffsetY=c.labelOffsetY,a.style.fillType=c.fillType,a.style.bgFillColor=c.bgFillColor,a.style.showLineLabel=c.showLineLabel,a.style.showDetailLabel=c.showDetailLabel,a.style.annoDetailText=c.annoDetailText,a.style.rotateAngel=c.rotateAngel,plotEdit.startEditing(a),e.displayGlyph2(document.getElementById("g_id"),d,c)):1==b?(a=Z.polyline,a.style.outlineColor=c.stroke,a.style.outlineWidth=c.strokeWidth,a.style.color=c.fill,a.style.fillType=c.fillType,plotEdit.startEditing(a),
e.displayGlyph2(document.getElementById("g_id"),d,c)):3==b?(b=Z.polygon,null!=a&&(b.style.fill=a.fill,b.style.color=a.color),plotEdit.startEditing(b),e.displayGlyph2(document.getElementById("g_id"),d,c)):4==b&&(plotEdit.startEditing(Z.label),e.displayGlyph2(document.getElementById("g_id"),d,c))};var cellCount=72,cellWidth=50,cellHeight=50,pixelRatio=window.devicePixelRatio||1,font,fontScale,fontSize,fontBaseline;function enableHighDPICanvas(b){"string"===typeof b&&(b=document.getElementById(b));var a=window.devicePixelRatio||1;if(1!==a){var c=b.width,d=b.height;b.width=c*a;b.height=d*a;b.style.width=c+"px";b.style.height=d+"px";b.getContext("2d").scale(a,a)}}
function renderGlyphItem(b,a){var c=b.getContext("2d");c.clearRect(0,0,cellWidth,cellHeight);var d=a[0].ftid;if(!(d>=font.numGlyphs)){c.fillStyle="#606060";c.font="9px sans-serif";c.fillText(d,1,cellHeight-1);var e=font.glyphs.get(d),g=e.advanceWidth,k=e.advanceWidth*fontScale,h=(cellWidth-k)/2;k=(cellWidth+k)/2;c.fillStyle="#a0a0a0";c.fillRect(h-4+1,fontBaseline,4,1);c.fillRect(h,fontBaseline,1,4);c.fillRect(k,fontBaseline,4,1);c.fillRect(k,fontBaseline,1,4);c.fillStyle="#000000";h=e.getPath(h,fontBaseline,
fontSize);h.fill=a[0].color;h.stroke=a[0].color;h.draw(c);e.advanceWidth=g;a=g_syminfo[d][0].name.split(" ");c=a[0];for(e=d=1;d<a.length;)(c+" "+a[d]).length<30*e?c=c+" "+a[d]:(c=c+"<br>"+a[d],e+=1),d++;var f='<font size="2" color="#575757">'+c+"</font>";b.onmousemove=function(b){if("none"==g_tooltip.style.display){g_tooltip.style.display="block";var a=this.getBoundingClientRect();b=document.getElementById("glyph-list-end").parentElement.getBoundingClientRect();var c=a.left;a=a.top;g_tooltip.innerHTML=
f;g_tooltip.offsetWidth+c>b.right&&(c=b.right-g_tooltip.offsetWidth);g_tooltip.style.position="absolute";g_tooltip.style.left=c+"px";g_tooltip.style.top=a+"px"}};b.onmouseout=function(b){g_tooltip.style.display="none"}}}
function displayGlyphArray(b){for(var a=0;a<b.length;a++)renderGlyphItem(document.getElementById("g"+a),b[a]);for(;a<cellCount;)document.getElementById("g"+a).onmousemove=null,document.getElementById("g"+a).onmouseout=null,document.getElementById("g"+a).getContext("2d").clearRect(0,0,cellWidth,cellHeight),a++}var g_tooltip;function prepareTooltip(b){var a=document.createElement("span");a.className="mapjb-marker-iconlabel2 ";a.innerHTML="";a.style.display="none";b.appendChild(a);return a}
function prepareGlyphList(b){var a=document.createElement("DIV");b.appendChild(a);var c=document.createElement("DIV");c.id="glyph-list-end";a.appendChild(c);a=document.getElementById("glyph-list-end");c=a.parentElement;for(var d=0;d<cellCount;d++){var e=document.createElement("canvas");e.width=cellWidth;e.height=cellHeight;e.className="item";e.id="g"+d;e.addEventListener("click",cellSelect,!1);enableHighDPICanvas(e);c.insertBefore(e,a)}g_tooltip=prepareTooltip(b)}
function cellSelect(b){if(font){b=parseInt(b.target.id.substr(1));b=g_symidpages[g_curpageidx][b];var a=b[0].ftid,c=getParentHelper(),d=1;0==g_curpageidx&&(d=0);null!=g_clkfun&&g_clkfun(a);c.startDrawingSymbol(d,getKeyidFromGid(a),b)}}
function getKeyidFromGid(b){var a=b;b-=0;34==b?a=2040:88==b?a=2041:89==b?a=2042:90==b?a=2043:92==b?a=2044:93==b?a=2052:94==b?a=2053:95==b?a=2054:96==b?a=2039:98==b?a=2034:99==b?a=2055:100==b?a=2056:101==b?a=2057:102==b?a=2038:104==b?a=2035:106==b?a=2036:108==b?a=2037:139==b?a=2060:140==b?a=2061:142==b?a=2100:143==b?a=2071:144==b?a=2004:145==b?a=2006:146==b?a=2003:147==b?a=2072:148==b?a=2073:150==b?a=2101:151==b?a=110:152==b?a=2102:153==b?a=2103:154==b?a=2104:155==b?a=2105:156==b?a=2150:157==b?a=2151:
158==b?a=2152:159==b?a=2153:160==b&&(a=2007);return a}
function getGidFromKeyid(b){var a=b;2E3<b&&(2040==b?a=34:2041==b?a=88:2042==b?a=89:2043==b?a=90:2044==b?a=92:2052==b?a=93:2053==b?a=94:2054==b?a=95:2039==b?a=96:2034==b?a=98:2055==b?a=99:2056==b?a=100:2057==b?a=101:2038==b?a=102:2035==b?a=104:2036==b?a=106:2037==b?a=108:2060==b?a=139:2061==b?a=140:2100==b?a=142:2071==b?a=143:2004==b?a=144:2006==b?a=145:2003==b?a=146:2072==b?a=147:2073==b?a=148:2101==b?a=150:110==b?a=151:2102==b?a=152:2103==b?a=153:2104==b?a=154:2105==b?a=155:2150==b?a=156:2151==b?
a=157:2152==b?a=158:2153==b?a=159:2007==b&&(a=160));return a}function setParentHelper(b){window.phelp=b;null==window.phelp&&(window.phelp=parent.g_drawHelper);thisWidget=window.phelp}function getParentHelper(){return window.phelp}prepareGlyphList(document.getElementById("plotlist"));window.font=parent.font;window.fontScale=parent.fontScale;window.fontSize=parent.fontSize;window.fontBaseline=parent.fontBaseline;window.g_symidnames=parent.g_symidnames;window.g_symidpages=parent.g_symidpages;
window.g_syminfo=parent.g_syminfo;window.g_strPlotConfig=parent.g_strPlotConfig;window.g_clkfun=parent.g_clkfun;$.getJSON(g_strPlotConfig+"/junconfig.json",function(b){g_strJson=b;plotEdit.loadConfig();1==window.g_showEdit&&(showEditProperty(window.g_showEditType,window.g_showEditObj,window.g_showEditStyle),window.g_showEdit=!1)});
function setViewValues(b){if(!(null==b||11>b.length)){for(var a=1;9>a;a++)document.getElementById("btn_"+a).title=b[a-1];document.getElementById("tab_plot").innerHTML=b[8];document.getElementById("tab_latlng").innerHTML=b[9];document.getElementById("tab_attr").innerHTML=b[10];document.getElementById("open_style").innerHTML="<i class='tree_icon'>-</i>"+b[11]}}setViewValues(g_viewconfigs);
function setShowEditProperty(b,a,c){window.g_showEdit=!0;window.g_showEditType=b;window.g_showEditObj=a;window.g_showEditStyle=c};/*
 colpick Color Picker
 https://github.com/mrgrain/colpick

 Copyright 2013, 2015 Moritz Kornher, Jose Vargas, Stefan Petre
 Released under the MIT license and GPLv2 license
 https://github.com/mrgrain/colpick/blob/master/LICENSE
*/
(function(b){"function"===typeof define&&define.amd?define(["jquery"],b):"object"===typeof exports?b(require("jquery")):b(jQuery)})(function(b){var a=function(){var a={showEvent:"click",onShow:function(){},onBeforeShow:function(){},onHide:function(){},onChange:function(){},onSubmit:function(){},colorScheme:"light",color:"auto",livePreview:!0,flat:!1,layout:"full",submit:1,submitText:"OK",height:156,polyfill:!1,styles:!1},c=function(a,c){a=g(a);b(c).data("colpick").fields.eq(1).val(a.r).end().eq(2).val(a.g).end().eq(3).val(a.b).end()},
k=function(a,c){b(c).data("colpick").fields.eq(4).val(Math.round(a.h)).end().eq(5).val(Math.round(a.s)).end().eq(6).val(Math.round(a.b)).end()},m=function(a,c){b(c).data("colpick").fields.eq(0).val(h(a))},r=function(a,c){b(c).data("colpick").selector.css("backgroundColor","#"+h({h:a.h,s:100,b:100}));b(c).data("colpick").selectorIndic.css({left:parseInt(b(c).data("colpick").height*a.s/100,10),top:parseInt(b(c).data("colpick").height*(100-a.b)/100,10)})},t=function(a,c){b(c).data("colpick").hue.css("top",
parseInt(b(c).data("colpick").height-b(c).data("colpick").height*a.h/360,10))},w=function(a,c){b(c).data("colpick").currentColor.css("backgroundColor","#"+h(a))},v=function(a,c){b(c).data("colpick").newColor.css("backgroundColor","#"+h(a))},u=function(){var a=b(this).parent().parent();if(0<this.parentNode.className.indexOf("_hex")){var n=a.data("colpick");var f=this.value,l=6-f.length;if(3==l){for(var q=[],p=0;p<l;p++)q.push(f[p]),q.push(f[p]);f=q.join("")}else if(0<l){q=[];for(p=0;p<l;p++)q.push("0");
q.push(f);f=q.join("")}n.color=n=d(f);c(n,a.get(0));k(n,a.get(0))}else 0<this.parentNode.className.indexOf("_hsb")?(a.data("colpick").color=n=x({h:parseInt(a.data("colpick").fields.eq(4).val(),10),s:parseInt(a.data("colpick").fields.eq(5).val(),10),b:parseInt(a.data("colpick").fields.eq(6).val(),10)}),c(n,a.get(0)),m(n,a.get(0))):(n=a.data("colpick"),f=parseInt(a.data("colpick").fields.eq(1).val(),10),l=parseInt(a.data("colpick").fields.eq(2).val(),10),q=parseInt(a.data("colpick").fields.eq(3).val(),
10),n.color=n=e({r:Math.min(255,Math.max(0,f)),g:Math.min(255,Math.max(0,l)),b:Math.min(255,Math.max(0,q))}),m(n,a.get(0)),k(n,a.get(0)));r(n,a.get(0));t(n,a.get(0));v(n,a.get(0));a.data("colpick").onChange.apply(a.parent(),[n,h(n),g(n),a.data("colpick").el,0])},G=function(){b(this).parent().removeClass("colpick_focus")},H=function(){b(this).parent().parent().data("colpick").fields.parent().removeClass("colpick_focus");b(this).parent().addClass("colpick_focus")},I=function(a){a.preventDefault?a.preventDefault():
a.returnValue=!1;var c=b(this).parent().find("input").focus();a={el:b(this).parent().addClass("colpick_slider"),max:0<this.parentNode.className.indexOf("_hsb_h")?360:0<this.parentNode.className.indexOf("_hsb")?100:255,y:a.pageY,field:c,val:parseInt(c.val(),10),preview:b(this).parent().parent().data("colpick").livePreview};b(document).mouseup(a,z);b(document).mousemove(a,A)},A=function(a){a.data.field.val(Math.max(0,Math.min(a.data.max,parseInt(a.data.val-a.pageY+a.data.y,10))));a.data.preview&&u.apply(a.data.field.get(0),
[!0]);return!1},z=function(a){u.apply(a.data.field.get(0),[!0]);a.data.el.removeClass("colpick_slider").find("input").focus();b(document).off("mouseup",z);b(document).off("mousemove",A);return!1},J=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1;var c={cal:b(this).parent(),y:b(this).offset().top};b(document).on("mouseup touchend",c,B);b(document).on("mousemove touchmove",c,C);a="touchstart"==a.type?a.originalEvent.changedTouches[0].pageY:a.pageY;u.apply(c.cal.data("colpick").fields.eq(4).val(parseInt(360*
(c.cal.data("colpick").height-(a-c.y))/c.cal.data("colpick").height,10)).get(0),[c.cal.data("colpick").livePreview]);return!1},C=function(a){var b="touchmove"==a.type?a.originalEvent.changedTouches[0].pageY:a.pageY;u.apply(a.data.cal.data("colpick").fields.eq(4).val(parseInt(360*(a.data.cal.data("colpick").height-Math.max(0,Math.min(a.data.cal.data("colpick").height,b-a.data.y)))/a.data.cal.data("colpick").height,10)).get(0),[a.data.preview]);return!1},B=function(a){c(a.data.cal.data("colpick").color,
a.data.cal.get(0));m(a.data.cal.data("colpick").color,a.data.cal.get(0));b(document).off("mouseup touchend",B);b(document).off("mousemove touchmove",C);return!1},K=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1;var c={cal:b(this).parent(),pos:b(this).offset()};c.preview=c.cal.data("colpick").livePreview;b(document).on("mouseup touchend",c,D);b(document).on("mousemove touchmove",c,E);if("touchstart"==a.type){var d=a.originalEvent.changedTouches[0].pageX;a=a.originalEvent.changedTouches[0].pageY}else d=
a.pageX,a=a.pageY;u.apply(c.cal.data("colpick").fields.eq(6).val(parseInt(100*(c.cal.data("colpick").height-(a-c.pos.top))/c.cal.data("colpick").height,10)).end().eq(5).val(parseInt(100*(d-c.pos.left)/c.cal.data("colpick").height,10)).get(0),[c.preview]);return!1},E=function(a){if("touchmove"==a.type){var b=a.originalEvent.changedTouches[0].pageX;var c=a.originalEvent.changedTouches[0].pageY}else b=a.pageX,c=a.pageY;u.apply(a.data.cal.data("colpick").fields.eq(6).val(parseInt(100*(a.data.cal.data("colpick").height-
Math.max(0,Math.min(a.data.cal.data("colpick").height,c-a.data.pos.top)))/a.data.cal.data("colpick").height,10)).end().eq(5).val(parseInt(100*Math.max(0,Math.min(a.data.cal.data("colpick").height,b-a.data.pos.left))/a.data.cal.data("colpick").height,10)).get(0),[a.data.preview]);return!1},D=function(a){c(a.data.cal.data("colpick").color,a.data.cal.get(0));m(a.data.cal.data("colpick").color,a.data.cal.get(0));b(document).off("mouseup touchend",D);b(document).off("mousemove touchmove",E);return!1},
L=function(){var a=b(this).parent(),c=a.data("colpick").color;a.data("colpick").origColor=c;w(c,a.get(0));a.data("colpick").onSubmit(c,h(c),g(c),a.data("colpick").el)},F=function(a){a&&a.stopPropagation();var c=b("#"+b(this).data("colpickId"));a&&!c.data("colpick").polyfill&&a.preventDefault();c.data("colpick").onBeforeShow.apply(this,[c.get(0)]);var d=b(this).offset();a=d.top+this.offsetHeight;d=d.left;var f=M(),e=c.width();d+e>f.l+f.w&&(d-=e);c.css({left:d+"px",top:a+"px"});0!=c.data("colpick").onShow.apply(this,
[c.get(0)])&&c.show();b("html").mousedown({cal:c},y);c.mousedown(function(a){a.stopPropagation()})},y=function(a){var c=b("#"+b(this).data("colpickId"));a&&(c=a.data.cal);0!=c.data("colpick").onHide.apply(this,[c.get(0)])&&c.hide();b("html").off("mousedown",y)},M=function(){var a="CSS1Compat"==document.compatMode;return{l:window.pageXOffset||(a?document.documentElement.scrollLeft:document.body.scrollLeft),w:window.innerWidth||(a?document.documentElement.clientWidth:document.body.clientWidth)}},x=
function(a){return{h:Math.min(360,Math.max(0,a.h)),s:Math.min(100,Math.max(0,a.s)),b:Math.min(100,Math.max(0,a.b))}},N=function(){var a=b(this).parent(),d=a.data("colpick").origColor;a.data("colpick").color=d;c(d,a.get(0));m(d,a.get(0));k(d,a.get(0));r(d,a.get(0));t(d,a.get(0));v(d,a.get(0))};return{init:function(f){f=b.extend({},a,f||{});if("auto"!==f.color)if("string"==typeof f.color)f.color=d(f.color);else if(void 0!=f.color.r&&void 0!=f.color.g&&void 0!=f.color.b)f.color=e(f.color);else if(void 0!=
f.color.h&&void 0!=f.color.s&&void 0!=f.color.b)f.color=x(f.color);else return this;return this.each(function(){if(!b(this).data("colpickId")){var a=b.extend({},f);"auto"===f.color&&(a.color=b(this).val()?d(b(this).val()):{h:0,s:0,b:0});a.origColor=a.color;"function"==typeof f.polyfill&&(a.polyfill=f.polyfill(this));if(!a.polyfill||!b(this).is("input")||"color"!==this.type){var e="collorpicker_"+parseInt(1E3*Math.random());b(this).data("colpickId",e);e=b('<div class="colpick"><div class="colpick_color"><div class="colpick_color_overlay1"><div class="colpick_color_overlay2"><div class="colpick_selector_outer"><div class="colpick_selector_inner"></div></div></div></div></div><div class="colpick_hue"><div class="colpick_hue_arrs"><div class="colpick_hue_larr"></div><div class="colpick_hue_rarr"></div></div></div><div class="colpick_new_color"></div><div class="colpick_current_color"></div><div class="colpick_hex_field"><div class="colpick_field_letter">#</div><input type="text" maxlength="6" size="6" /></div><div class="colpick_rgb_r colpick_field"><div class="colpick_field_letter">R</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_rgb_g colpick_field"><div class="colpick_field_letter">G</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_rgb_b colpick_field"><div class="colpick_field_letter">B</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_hsb_h colpick_field"><div class="colpick_field_letter">H</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_hsb_s colpick_field"><div class="colpick_field_letter">S</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_hsb_b colpick_field"><div class="colpick_field_letter">B</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_submit"></div></div>').attr("id",
e);e.addClass("colpick_"+a.layout+(a.submit?"":" colpick_"+a.layout+"_ns"));"light"!=a.colorScheme&&e.addClass("colpick_"+a.colorScheme);e.find("div.colpick_submit").html(a.submitText).click(L);a.fields=e.find("input").change(u).blur(G).focus(H);e.find("div.colpick_field_arrs").mousedown(I).end().find("div.colpick_current_color").click(N);a.selector=e.find("div.colpick_color").on("mousedown touchstart",K);a.selectorIndic=a.selector.find("div.colpick_selector_outer");a.el=this;a.hue=e.find("div.colpick_hue_arrs");
var g=a.hue.parent(),l=navigator.userAgent.toLowerCase(),h="Microsoft Internet Explorer"===navigator.appName,p=h?parseFloat(l.match(/msie ([0-9]*[\.0-9]+)/)[1]):0;l="#ff0000 #ff0080 #ff00ff #8000ff #0000ff #0080ff #00ffff #00ff80 #00ff00 #80ff00 #ffff00 #ff8000 #ff0000".split(" ");if(h&&10>p)for(h=0;11>=h;h++)p=b("<div></div>").attr("style","height:8.333333%; filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr="+l[h]+", endColorstr="+l[h+1]+'); -ms-filter: "progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='+
l[h]+", endColorstr="+l[h+1]+')";'),g.append(p);else l=l.join(","),g.attr("style","background:-webkit-linear-gradient(top,"+l+"); background: -o-linear-gradient(top,"+l+"); background: -ms-linear-gradient(top,"+l+"); background:-moz-linear-gradient(top,"+l+"); -webkit-linear-gradient(top,"+l+"); background:linear-gradient(to bottom,"+l+"); ");e.find("div.colpick_hue").on("mousedown touchstart",J);a.newColor=e.find("div.colpick_new_color");a.currentColor=e.find("div.colpick_current_color");e.data("colpick",
a);c(a.color,e.get(0));k(a.color,e.get(0));m(a.color,e.get(0));t(a.color,e.get(0));r(a.color,e.get(0));w(a.color,e.get(0));v(a.color,e.get(0));a.flat?(e.appendTo(a.appendTo||this).show(),e.css(a.styles||{position:"relative",display:"block"})):(e.appendTo(a.appendTo||document.body),b(this).on(a.showEvent,F),e.css(a.styles||{position:"absolute"}))}}})},showPicker:function(){return this.each(function(){b(this).data("colpickId")&&F.apply(this)})},hidePicker:function(){return this.each(function(){b(this).data("colpickId")&&
y.apply(this)})},setColor:function(a,f){f="undefined"===typeof f?1:f;if("string"==typeof a)a=d(a);else if(void 0!=a.r&&void 0!=a.g&&void 0!=a.b)a=e(a);else if(void 0!=a.h&&void 0!=a.s&&void 0!=a.b)a=x(a);else return this;return this.each(function(){if(b(this).data("colpickId")){var d=b("#"+b(this).data("colpickId"));d.data("colpick").color=a;d.data("colpick").origColor=a;c(a,d.get(0));k(a,d.get(0));m(a,d.get(0));t(a,d.get(0));r(a,d.get(0));v(a,d.get(0));d.data("colpick").onChange.apply(d.parent(),
[a,h(a),g(a),d.data("colpick").el,1]);f&&w(a,d.get(0))}})},destroy:function(){b("#"+b(this).data("colpickId")).remove()}}}(),c=function(a){a=parseInt(-1<a.indexOf("#")?a.substring(1):a,16);return{r:a>>16,g:(a&65280)>>8,b:a&255}},d=function(a){return e(c(a))},e=function(a){var b={h:0,s:0,b:0},c=Math.max(a.r,a.g,a.b),d=c-Math.min(a.r,a.g,a.b);b.b=c;b.s=0!=c?255*d/c:0;b.h=0!=b.s?a.r==c?(a.g-a.b)/d:a.g==c?2+(a.b-a.r)/d:4+(a.r-a.g)/d:-1;b.h*=60;0>b.h&&(b.h+=360);b.s*=100/255;b.b*=100/255;return b},g=function(a){var b,
c;var d=a.h;var e=255*a.s/100;a=255*a.b/100;if(0==e)d=b=c=a;else{e=(255-e)*a/255;var f=d%60*(a-e)/60;360==d&&(d=0);60>d?(d=a,c=e,b=e+f):120>d?(b=a,c=e,d=a-f):180>d?(b=a,d=e,c=e+f):240>d?(c=a,d=e,b=a-f):300>d?(c=a,b=e,d=e+f):360>d?(d=a,b=e,c=a-f):c=b=d=0}return{r:Math.round(d),g:Math.round(b),b:Math.round(c)}},k=function(a){var c=[a.r.toString(16),a.g.toString(16),a.b.toString(16)];b.each(c,function(a,b){1==b.length&&(c[a]="0"+b)});return c.join("")},h=function(a){return k(g(a))};b.fn.extend({colpick:a.init,
colpickHide:a.hidePicker,colpickShow:a.showPicker,colpickSetColor:a.setColor,colpickDestroy:a.destroy});b.extend({colpick:{rgbToHex:k,rgbToHsb:e,hsbToHex:h,hsbToRgb:g,hexToHsb:d,hexToRgb:c}})});
